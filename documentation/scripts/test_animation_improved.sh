#!/bin/bash

# æµ‹è¯•æ”¹è¿›åçš„åƒå­åŠ¨ç”»æ•ˆæœ
# ä½œè€…ï¼šAIåŠ©æ‰‹
# æ—¥æœŸï¼š2025-08-07

echo "ğŸ¬ æµ‹è¯•æ”¹è¿›åçš„è±¡æ£‹åƒå­åŠ¨ç”»æ•ˆæœ"
echo "=================================="
echo ""
echo "ğŸ¯ åŠ¨ç”»æ”¹è¿›å†…å®¹ï¼š"
echo "  âœ… å¢åŠ æ’­æ”¾æ—¶é—´ï¼šæ¯å¸§800ms"
echo "  âœ… æ·»åŠ ç”¨æˆ·äº¤äº’ï¼šæŒ‰å›è½¦ç»§ç»­"
echo "  âœ… æ”¹è¿›è§†è§‰æ•ˆæœï¼šä½¿ç”¨emojiç¬¦å·"
echo "  âœ… è¯¦ç»†ä¿¡æ¯æ˜¾ç¤ºï¼šå½±å“ä½ç½®å’Œæ£‹å­"
echo "  âœ… åˆ†å¸§æ ‡é¢˜ï¼šæ¸…æ™°çš„åŠ¨ç”»è¯´æ˜"
echo ""
echo "ğŸ® æµ‹è¯•æ­¥éª¤ï¼š"
echo "  1. å¯åŠ¨æ¸¸æˆ"
echo "  2. é€‰æ‹©å¿«é€Ÿå¼€å§‹ï¼ˆè¾“å…¥0ï¼‰"
echo "  3. è¿›è¡Œèµ°æ³•ï¼Œå¯»æ‰¾åƒå­æœºä¼š"
echo "  4. è§‚å¯ŸåŠ¨ç”»æ•ˆæœ"
echo ""
echo "ğŸ’¡ åƒå­åŠ¨ç”»ç‰¹ç‚¹ï¼š"
echo "  ğŸ”º ç¬¬1å¸§ï¼šæ£‹å­å‘ä¸Šè·³è·ƒï¼ˆçº¢è‰²ä¸‰è§’ï¼‰"
echo "  ğŸ”» ç¬¬2å¸§ï¼šæ£‹å­å‘ä¸‹éœ‡åŠ¨ï¼ˆè“è‰²ä¸‰è§’ï¼‰"
echo "  ğŸ’« ç¬¬3å¸§ï¼šæ£‹å­å·¦å³æ‘‡æ‘†ï¼ˆæ˜Ÿæ˜Ÿæ•ˆæœï¼‰"
echo ""
echo "ğŸ¯ å½±å“èŒƒå›´ï¼šè¢«åƒæ£‹å­ä½ç½® + å‘¨å›´8ä¸ªæ–¹å‘"
echo ""

read -p "æŒ‰å›è½¦é”®å¯åŠ¨æ¸¸æˆæµ‹è¯•..."

echo ""
# è·å–è„šæœ¬æ‰€åœ¨ç›®å½•å’Œé¡¹ç›®æ ¹ç›®å½•
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
PROJECT_ROOT="$( cd "$SCRIPT_DIR/../.." && pwd )"

echo "ğŸš€ å¯åŠ¨æ¸¸æˆ..."
cd "$PROJECT_ROOT"

# ç¡®ä¿ä¾èµ–å·²ä¸‹è½½å¹¶å¤åˆ¶åˆ°target/dependencyç›®å½•
if [ ! -d "$PROJECT_ROOT/target/dependency" ] || [ -z "$(ls -A "$PROJECT_ROOT/target/dependency" 2>/dev/null)" ]; then
    echo "ğŸ“š ä¸‹è½½é¡¹ç›®ä¾èµ–..."
    mvn dependency:copy-dependencies
    if [ $? -ne 0 ]; then
        echo "âŒ ä¾èµ–ä¸‹è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥"
        exit 1
    fi
    echo "âœ… ä¾èµ–ä¸‹è½½å®Œæˆ"
fi

# å¯åŠ¨æ¸¸æˆï¼ˆåŒ…å«ä¾èµ–åº“ï¼‰
java -cp "$PROJECT_ROOT/target/classes:$PROJECT_ROOT/target/dependency/*" com.example.terminal.TerminalChessGame