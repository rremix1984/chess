# DeepSeek-Pikafish AI 使用说明

## 概述

DeepSeek-Pikafish AI 是一个混合AI引擎，结合了：
- **Pikafish引擎**：提供顶级象棋计算能力
- **DeepSeek-R1模型**：提供局面理解和策略分析

## 功能特点

### 🚀 核心优势
- **专业引擎 + AI融合**：结合传统引擎的精确计算和大模型的战略思维
- **动态权重调整**：根据局面复杂度自动调整引擎和模型的权重
- **多难度支持**：5个难度级别，适合不同水平的玩家
- **智能备用机制**：引擎不可用时自动切换到纯AI模式

### 🎯 技术特性
- 支持FEN格式局面转换
- UCI协议引擎通信
- HTTP API调用DeepSeek模型
- 自动资源管理和清理

## 使用方法

### 1. 启动游戏
```bash
# 编译项目
mvn compile

# 运行游戏
./run_deepseek_test.sh
```

### 2. 选择AI类型
在游戏菜单中选择：
```
5. DeepSeek-Pikafish AI（专业引擎+AI融合，顶级棋力）
```

### 3. 选择模型
选择DeepSeek-R1模型：
```
3. DeepSeek-R1（推理专用模型）
```

### 4. 设置难度
选择1-5级难度：
- **1级**：入门级（思考时间短）
- **2级**：初级
- **3级**：中级
- **4级**：高级
- **5级**：专家级（思考时间长）

## 配置要求

### 环境要求
- Java 8+
- Maven 3.6+
- 网络连接（访问DeepSeek API）

### API配置
需要配置DeepSeek API密钥（如果使用在线模式）

### Pikafish引擎
- 系统PATH中有pikafish可执行文件，或
- 默认使用项目内路径：`./pikafish_engine/MacOS/pikafish-apple-silicon`
- 通过系统属性指定自定义路径：`-Dpikafish.path=/path/to/pikafish`

## 状态监控

游戏中可以查看AI状态：
```
🤖 DeepSeek-Pikafish混合AI状态:
- 颜色: 红方/黑方
- 难度: X/5
- 模型: deepseek-r1:7b
- Pikafish: 可用/不可用
- 引擎权重: X.X
- 模型权重: X.X
```

## 故障排除

### 常见问题

1. **Pikafish引擎不可用**
   - 检查引擎是否安装
   - 检查PATH配置
   - 系统会自动切换到纯AI模式

2. **API调用失败**
   - 检查网络连接
   - 检查API密钥配置
   - 检查模型服务状态

3. **编译错误**
   - 确保Java版本兼容
   - 检查依赖包是否完整

### 调试信息
游戏运行时会显示详细的调试信息：
- 引擎通信日志
- API调用状态
- 走法生成过程
- 错误详情

## 性能优化

### 推荐配置
- **内存**：建议4GB+可用内存
- **CPU**：多核处理器获得更好性能
- **网络**：稳定的网络连接

### 调优建议
- 根据硬件性能调整难度级别
- 网络不稳定时降低模型权重
- 关键局面可以增加思考时间

## 技术架构

```
用户输入 → TerminalChessGame → DeepSeekPikafishAI
                                      ↓
                              ┌─────────────┐
                              │ 决策融合器   │
                              └─────────────┘
                                ↙         ↘
                    ┌─────────────┐   ┌─────────────┐
                    │ Pikafish    │   │ DeepSeek-R1 │
                    │ 引擎        │   │ 模型        │
                    └─────────────┘   └─────────────┘
```

## 更新日志

### v1.0.0
- 初始版本发布
- 支持Pikafish引擎集成
- 支持DeepSeek-R1模型
- 实现混合决策机制
- 添加资源管理和清理

---

**注意**：本AI需要网络连接访问DeepSeek API。首次使用时可能需要下载和配置Pikafish引擎。