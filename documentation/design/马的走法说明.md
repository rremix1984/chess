# 马的走法说明

## 问题分析

用户输入"马二进三"时提示无效，这是因为：

### 1. 马的移动特点
- 马走"日"字形，每次移动必须是2格直线+1格垂直（或1格直线+2格垂直）
- 马不能像车、炮、兵等棋子一样使用"进退平"的标准记谱法
- "马二进三"这种记谱法对马而言是不正确的

### 2. 正确的马的记谱方式

#### 方式一：坐标格式
```
马2,3  # 马移动到第2行第3列
```

#### 方式二：起始坐标到目标坐标
```
(9,1)到(7,2)  # 从起始位置到目标位置
```

#### 方式三：自然语言描述（不包含进退平）
```
马走日字到3,2
马跳到7,2
```

### 3. 为什么"马二进三"无效

1. **标准记谱法失败**：马不支持"进退平"记谱法
2. **自然语言解析被正确拒绝**：系统检测到马+进退平的组合，拒绝解析

### 4. 马的正确走法示例

假设红马在(9,1)位置，可以移动到：
- (7,0) - 向前2格，向左1格
- (7,2) - 向前2格，向右1格  
- (8,3) - 向前1格，向右2格

正确的输入方式：
```
马7,0
马7,2
马8,3
```

### 5. 技术实现

系统在两个地方正确拒绝了马的"进退平"记谱法：

1. **标准记谱法解析**：`calculateTargetPosition`方法检测到马时返回null
2. **自然语言解析**：`extractTargetPosition`方法检测到马+进退平时拒绝解析

这确保了马只能使用正确的走法格式。