# 🌐 中国象棋网络对弈使用说明

## 📋 功能概述

网络对弈系统让两个玩家可以通过网络进行象棋对弈，支持：
- ✅ **创建房间**：创建自己的游戏房间等待对手
- ✅ **加入房间**：加入其他玩家创建的房间
- ✅ **实时对弈**：双方移动同步显示
- ✅ **房间管理**：查看房间列表、房间状态等

## ✅ 当前状态

**已完成功能：**
- ✅ 网络服务器实现完成
- ✅ 客户端连接功能
- ✅ 房间创建和加入逻辑
- ✅ 消息协议定义完整
- ✅ 服务器成功编译和启动
- ✅ "🌐 网络对战"按钮已添加到游戏主界面
- ✅ **JSON消息通信正常工作** ✨
- ✅ **网络测试成功** ✨
- ✅ **房间创建和管理正常** ✨

**待完善功能：**
- 📝 房间列表显示优化
- 📝 网络对弈棋子移动同步
- 📝 聊天功能

## 🚀 快速开始

### 第一步：启动服务器

```bash
# 方法1：使用启动脚本（推荐）
./start-server.sh

# 方法2：手动启动
cd chinese-chess
mvn compile
mvn exec:java -Dexec.mainClass="com.example.chinesechess.network.ChessGameServer"
```

服务器启动后会显示：
```
🚀 象棋游戏服务器启动，端口: 8080
🌟 服务器开始监听客户端连接...
```

### 第二步：启动游戏客户端

1. **启动象棋游戏**
   ```bash
   cd chinese-chess
   mvn exec:java -Dexec.mainClass="com.example.chinesechess.ui.GameFrame"
   ```

2. **进入网络模式**
   - 在游戏主界面点击 **"🌐 网络对战"** 按钮
   - 会自动打开网络房间界面

### 第三步：连接服务器

在网络房间界面：
1. **服务器地址**：localhost（本机测试）
2. **端口**：8080
3. **玩家名**：输入你的昵称
4. 点击 **"连接"** 按钮

连接成功后状态栏显示：🟢 已连接到服务器

### 第四步：创建或加入房间

#### 🏠 创建房间
1. 点击 **"创建房间"** 按钮
2. 输入房间名（如：小明的房间）
3. 创建成功后自动进入游戏界面
4. 等待其他玩家加入

#### 🚪 加入房间
1. 点击 **"刷新房间列表"** 查看可用房间
2. 选择要加入的房间
3. 点击 **"加入房间"** 按钮（或双击房间）
4. 成功后自动进入游戏界面

### 第五步：开始对弈

- 房间满员（2人）后游戏自动开始
- 系统随机分配红黑方
- 红方先手，按象棋规则进行对弈
- 对手的移动会实时同步显示

## 🎮 网络对弈界面

进入网络模式后，游戏界面会显示：
- 窗口标题显示房间信息和对手
- AI相关控件被禁用（网络模式不使用AI）
- 状态栏显示当前玩家和网络状态

## 🔧 多人测试

要测试网络功能，你需要：

1. **启动1个服务器**
2. **启动2个游戏客户端**：
   - 客户端1：创建房间
   - 客户端2：加入房间
3. **开始对弈**

可以在同一台电脑上运行多个客户端进行测试。

## 📝 房间列表格式

| 房间ID | 房间名 | 主机 | 玩家数 | 状态 |
|--------|--------|------|--------|------|
| room_1001 | 小明的房间 | 小明 | 1/2 | WAITING |
| room_1002 | 快速对弈 | 小红 | 2/2 | PLAYING |

- **WAITING**：等待玩家加入
- **PLAYING**：正在游戏中

## ⚠️ 注意事项

1. **服务器必须先启动**，客户端才能连接
2. **防火墙设置**：确保8080端口未被阻止
3. **网络连接**：
   - 本机测试：localhost
   - 局域网：使用服务器的IP地址
   - 公网：需要公网IP或域名
4. **游戏规则**：遵循标准中国象棋规则

## 🐛 常见问题

**Q: 连接失败怎么办？**
A: 
- 检查服务器是否启动
- 确认端口号正确（8080）
- 检查网络连接

**Q: 看不到房间列表？**
A:
- 点击"刷新房间列表"按钮
- 确认已连接到服务器

**Q: 加入房间失败？**
A:
- 房间可能已满（2/2）
- 房间可能已删除
- 刷新房间列表后重试

**Q: 对手断线了怎么办？**
A:
- 系统会显示"对手已断开连接"
- 可以选择返回房间列表
- 重新创建或加入其他房间

## 🎯 下一步计划

- [ ] 添加聊天功能
- [ ] 添加观战功能  
- [ ] 添加房间密码保护
- [ ] 添加玩家排行榜
- [ ] 添加游戏回放功能

---

🎮 **祝你游戏愉快！** 有问题随时反馈。
